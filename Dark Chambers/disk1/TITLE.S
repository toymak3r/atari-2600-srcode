	.6502
	.list


* 
* PROGRAM TO TEST MAIN KERNAL
*
* EQUATES
*
VSYNC	=	$00
VBLANK	=	$01
WSYNC	=	$02
RSYNC	=	$03
NUSIZ0	=	$04
NUSIZ1	=	$05
COLUP0	=	$06
COLUP1	=	$07
COLUPF	=	$08
COLUBK	=	$09
CTRLPF	=	$0A
REFP0	=	$0B
REFP1	=	$0C
PF0	=	$0D
PF1	=	$0E
PF2	=	$0F
RESP0	=	$10
RESP1	=	$11
RESM0	=	$12
RESM1	=	$13
RESBL	=	$14
GRP0	=	$1B
GRP1	=	$1C
ENABL	=	$1F
HMP0	=	$20
HMP1	=	$21
HMBL	=	$24
VDELP0	=	$25
VDELP1	=	$26
HMOVE	=	$2A
HMCLR	=	$2B
SWCHA	=	$280
	.ORG	$80
ADPF0:	.DS.B	2	;ADDRESS OF PLAYFIELD (ADDR),Y
ADPF1:	.DS.B	2
ADPF2:	.DS.B	2
VERTP0: .DS.B	1	;VERTICAL OFFSET PLAYER 0
VERTP1: .DS.B	1
HORIP0: .DS.B	1	;HORIZONTAL LOCATIONS
HORIP1: .DS.B	1
PLREF0: .DS.B	8	;PLAYER REFLECT AND SIZE 
PLREF1: .DS.B	8
PTYPE0: .DS.B	8	;PLAYER TYPE
PTYPE1: .DS.B	8
WIDP0:	.DS.B	8	;LENGTH OF PLAYER IN BYTES
WIDP1:	.DS.B	8
ADDRP0: .DS.B	2	;ADDRESS OF PLAYER 0
ADDRP1: .DS.B	2
VOFFP0: .DS.B	1	;VERTICAL OFFSET PLAYER 0
VOFFP1: .DS.B	1
COLP0:	.DS.B	2	;COLOR ADDRESS
COLP1:	.DS.B	2
WIDTH0: .DS.B	1	;LENGTH OF PLAYERS COUNTER
WIDTH1: .DS.B	1
PCOUNT: .DS.B	1	;PLAYER RESET COUNTER
PFCOUNT:	.DS.B	1	;PLAYFIELD UPDATE COUNTER
COUNTER:	.DS.B	1	;LINE COUNTER
COUNTER1:	.DS.B	1
VCOUNT: .DS.B	1	;LINES TILL PLAYFIELD DRAW
V1COUNT:	.DS.B	1	;LINES TILL PLAYER RESET
PRIORITY:	.DS.B	1
XPOS0:	.DS.B	1
XPOS1:	.DS.B	1	;HORIZONTAL LOCATIONS OF PLAYERS
YPOS0:	.DS.B	1	;VERTICAL LOCATION OF PLAYERS
YPOS1:	.DS.B	1
C:	DS.B	1
TYPECOUNT:	DS.B	1		;COUNTER FOR PLAYER0 SCREEN DATA
TYPE1COUNT:	DS.B	1
P0DELAY:	DS.B	1		;NUMBER OF LINES LEFT TO DO
TYPEADD:	DS.B	1		;NUMBER TO ADD TO OFFSET 1-L,R	4-U,D
TYPE1ADD:	DS.B	1
DEFALT	=	2		;DEFAULT NUMBER TO WAIT 2/60 SEC
PSTICK: DS.B	1		;PREVIOUS JOYSTICK CONDITION
PSTICK1:	DS.B	1
LEVEL:	DS.B	1		;LEVEL COUNTER
TEMP:	.DS.B	4	;TEMPARARY LOCATIONS
DI:
	DS.B	8
KE:
	DS.B	2

	.ORG	$F000
main:
	lda #$fd   ;#$2 	;put unit into 2600 mode
	sta $08    ;$1
	sei
	cld
	ldy #00
MA:
	nop			;wait loop
	nop
	nop
	nop
	dey
	bne MA
	ldx	#$ff	;init stack
	txs

	ldx #0		;turn off vertical blank
	stx 1
M0:
	lda	#02
	ldy	#0
	sta 2		;wait
	sta	0		;start vertical sync
	sta 2
	STY	GRP0
	STY	GRP1
	STA	HMCLR
	sta 2		;wait 3 lines
	sta 2
	sty 0		;turn off vertical sync
	sta 1		;turn on vertical blank
	LDA #42
	STA $296	;START TIMER
	STA	2
	LDA	#$02
	STA	NUSIZ0
	STA	NUSIZ1
	LDA	#34
	STA	COUNTER
	LDA	#$00
	STA	COLUBK
	STA	COLUPF
	STA	GRP0
	STA	GRP1
	LDA	#$10
	STA	HMP1
	NOP
	NOP
	NOP
	STA	RESP0
	STA	RESP1
	LDA	#$01
	STA	VDELP0
	STA	VDELP1
	STA	WSYNC
	STA	HMOVE

.5:	LDA	$284
	BNE	.5
	LDA	#$00
	STA	1
.6:
	LDX	#20
.7:
	STA	WSYNC
	DEX
	BNE	.7
.8:
	STA	WSYNC
	LDX	COUNTER
	LDA	LOGO1C,X
	STA	COLUP0
	STA	COLUP1
	LDA	LOGO1,X
	STA	GRP0
	LDA	LOGO2,X
	STA	GRP1
	LDA	LOGO3,X
	STA	GRP0
	LDA	LOGO2C,X
	LDY	LOGO4,X
	STY	GRP1
	STY	GRP0
	STA	COLUP0
	STA	COLUP1
	DEC	COUNTER
	BPL	.8
	STA	WSYNC
	LDA	#$71
	STA	GRP0
	LDA	#$E0
	STA	GRP1
	LDA	#$03
	STA	GRP0
	STA	NUSIZ0
	STA	NUSIZ1
	LDA	#$0A
	STA	COLUP0
	STA	COLUP1
	LDX	#$00
	LDA	#22
	STA	COUNTER
	LDA	#$C2
	STA	COLUBK
	LDY	#$C4
	STY	COLUP0
	STY	COLUP1
	STY	COLUBK
	STY	GRP1
	STA	COLUP1
	STX	COLUBK

.81:
	LDX	COUNTER
	LDA	LOGO3C,X
	STA	COLUP0
	STA	WSYNC
	STA	COLUP1
	LDA	LOGO5,X
	STA	GRP0
	LDA	LOGO6,X
	STA	GRP1
	LDA	LOGO7,X
	STA	GRP0
	LDA	LOGO8,X
	STA	TEMP
	LDY	LOGO9,X
	LDA	LOGOA,X
	LDX	TEMP
	STX	GRP1
	STY	GRP0
	STA	GRP1
	STA	GRP0
	DEC	COUNTER
	BPL	.81
	LDX	#137
.9:
	STA	WSYNC
	DEX
	BNE	.9
	LDA	#$00
	STA	COLUP0
	STA	COLUP1
	LDX	#30
.10:
	STA	WSYNC
	DEX
	BPL	.10
	JMP	M0
	.ORG	$F200
LOGO1C:
	DC.B	$0A,$0A,$0A,$0A,$08,$08,$08,$08,$08,$08,$08,$08,$06,$06,$06,$06
	DC.B	$06,$06,$06,$06,$04,$04,$04,$04,$04,$04,$04,$02,$02,$02,$00,$00
	DC.B	$00,$00,$00
LOGO2C:
	DC.B	$C6,$C8,$74,$74,$74,$74,$74,$76,$76,$76,$76,$76,$76,$76,$76,$76
	DC.B	$78,$78,$78,$78,$78,$78,$78,$78,$78,$7C,$76,$76,$76,$76,$76,$36
	DC.B	$36,$36,$36
LOGO3C:
	DC.B	$00,$0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E,$0E,$0C,$0C,$0C,$0C,$0C
	DC.B	$0C,$0C,$0C,$0A,$0A,$0A,$0A
LOGO1:
	DC.B	$31,$31,$30,$30,$30,$38,$18,$18,$18,$18,$18,$18,$18,$1C,$0C,$0C
	DC.B	$0C,$0C,$0C,$0C,$0C,$0C,$0E,$0E,$06,$06,$07,$07,$07,$03,$00,$00
	DC.B	$00,$00,$00
LOGO2:
	DC.B	$F0,$F0,$F8,$F8,$F8,$F8,$7C,$7C,$7C,$7C,$3E,$3E,$3E,$3E,$3E,$3E
	DC.B	$3E,$3E,$7E,$7C,$7C,$7C,$7C,$78,$F8,$F8,$F0,$F0,$E0,$C0,$00,$00
	DC.B	$00,$00,$00
LOGO3:
	DC.B	$FF,$3F,$08,$0F,$0A,$0A,$0F,$08,$08,$0F,$0A,$0A,$0F,$08,$08,$0F
	DC.B	$15,$15,$3F,$2A,$6A,$7F,$55,$55,$7F,$5B,$04,$04,$04,$04,$04,$06
	DC.B	$07,$06,$04
LOGO4:
	DC.B	$FF,$FC,$88,$F8,$28,$28,$F8,$88,$88,$F8,$28,$28,$F8,$88,$88,$F8
	DC.B	$54,$54,$FE,$AA,$AB,$FF,$55,$55,$FF,$6D,$00,$00,$00,$00,$00,$00
	DC.B	$00,$00,$00
LOGO5:
	DC.B	$00,$00,$00,$00,$00,$07,$1F,$07,$00,$00,$00,$00,$F8,$FC,$FE,$FF
	DC.B	$FF,$FF,$6F,$67,$63,$63,$61
	.ORG	$F300
LOGO6:
	DC.B	$00,$00,$00,$00,$00,$FF,$FF,$FF,$00,$00,$00,$00,$07,$0F,$0D,$0D
	DC.B	$8D,$8D,$CD,$CD,$ED,$ED,$E0
LOGO7:
	DC.B	$00,$00,$01,$03,$00,$FF,$FF,$FF,$00,$02,$01,$00,$36,$B6,$B6,$B6
	DC.B	$B6,$B6,$B6,$B6,$BE,$BC,$00
LOGO8:
	DC.B	$00,$F0,$F8,$18,$18,$DB,$DB,$DB,$18,$18,$18,$18,$79,$FB,$DB,$DB
	DC.B	$DB,$DB,$DB,$DB,$FB,$71,$00
LOGO9:
	DC.B	$00,$02,$04,$04,$07,$FF,$FF,$FF,$07,$04,$02,$00,$E7,$EF,$0D,$4D
	DC.B	$6D,$2D,$2D,$6D,$EF,$E7,$00
LOGOA:
	DC.B	$00,$00,$00,$00,$E0,$E0,$E0,$E0,$E0,$00,$03,$06,$36,$B6,$B6,$B6
	DC.B	$B6,$B6,$B6,$B6,$BE,$38,$00


	.ORG	$FFF8
			
	.dc.w	$fff7
	.dc.w	main	;NMI
	.dc.w	main	;RESET
	.dc.w	main	;IRQ
 
ÿ
